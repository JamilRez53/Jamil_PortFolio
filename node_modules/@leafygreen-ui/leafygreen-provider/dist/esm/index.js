import e,{useContext as r,createContext as n,useState as o,useMemo as t,useEffect as a}from"react";import i from"prop-types";import{getTheme as l}from"@leafygreen-ui/lib";import{useEventListener as u}from"@leafygreen-ui/hooks";var c=n({contextDarkMode:!1,setDarkMode:function(){}}),p=function(){return r(c)},d=function(e){var r,n=p(),o=n.contextDarkMode,t=n.setDarkMode,a=null!==(r=null!=e?e:o)&&void 0!==r&&r;return{darkMode:a,theme:l(a),setDarkMode:t}};function s(r){var n=r.children,o=r.contextDarkMode,t=r.setDarkMode;return e.createElement(c.Provider,{value:{contextDarkMode:o,setDarkMode:t}},n)}function v(e,r){if(null==e)return{};var n,o,t=function(e,r){if(null==e)return{};var n,o,t={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],r.indexOf(n)>=0||(t[n]=e[n]);return t}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,t,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===r);else for(;!(u=(o=a.call(n)).done)&&(l.push(o.value),l.length!==r);u=!0);}catch(e){c=!0,t=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw t}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return y(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,r){r>e.length&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}s.displayName="DarkModeProvider",s.propTypes={children:i.node,contextDarkMode:i.bool};var m=["children"],b=n({forceUseTopLayer:!1}),h=function(){return r(b)},P=function(r){var n=r.children,o=v(r,m);return e.createElement(b.Provider,{value:o},n)};P.displayName="MigrationProvider",P.propTypes={children:i.node};var g={popover:{portalContainer:void 0,scrollContainer:void 0}},k=n(g);function M(){return r(k).popover}function O(r){var n=r.popover,o=void 0===n?g.popover:n,t=r.children;return e.createElement(k.Provider,{value:{popover:o}},t)}var T=n(14);function E(){return r(T)}function C(r){var n=r.children,o=r.baseFontSize,t=void 0===o?14:o;return e.createElement(T.Provider,{value:t},n)}C.displayName="TypographyProvider",C.propTypes={children:i.node,baseFontSize:i.number};var D={usingKeyboard:!0,setUsingKeyboard:function(){}},w=n(D),S={tab:9,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};function x(){return r(w)}function A(r){var n=r.children,a=f(o(D.usingKeyboard),2),i=a[0],l=a[1];u("mousedown",(function(){return l(!1)}),{enabled:i}),u("keydown",(function(e){var r=e.keyCode;Object.values(S).includes(r)&&l(!0)}),{enabled:!i});var c=t((function(){return{usingKeyboard:i,setUsingKeyboard:l}}),[i]);return e.createElement(w.Provider,{value:c},n)}function j(r){var n=r.children,t=r.baseFontSize,i=r.popoverPortalContainer,l=r.darkMode,u=r.forceUseTopLayer,c=void 0!==u&&u,d=p().contextDarkMode,v=f(o(null!=l?l:d),2),y=v[0],m=v[1];a((function(){m(null!=l?l:d)}),[l,d]);var b=E(),g=null!=t?t:b,k=M(),T=null!=i?i:k,D=h(),w=c||D.forceUseTopLayer;return e.createElement(A,null,e.createElement(O,{popover:T},e.createElement(C,{baseFontSize:g},e.createElement(s,{contextDarkMode:y,setDarkMode:m},e.createElement(P,{forceUseTopLayer:w},n)))))}A.displayName="UsingKeyboardProvider",A.propTypes={children:i.node},j.displayName="LeafyGreenProvider",j.propTypes={popoverPortalContainer:i.shape({popover:i.shape({portalContainer:i.elementType,scrollContainer:i.elementType})}),baseFontSize:i.oneOf([14,16]),darkMode:i.bool};var U=n({isPopoverOpen:!1,setIsPopoverOpen:function(){}}),I=function(){return r(U)},N=function(r){var n=r.children,a=f(o(!1),2),i=a[0],l=a[1],u=t((function(){return{isPopoverOpen:i,setIsPopoverOpen:l}}),[i]);return e.createElement(U.Provider,{value:u},n)};N.displayName="PopoverProvider",N.propTypes={children:i.node};var K=["children"],L=n({}),z=function(){return r(L)},F=function(r){var n=r.children,o=v(r,K),t=M(),a={portalContainer:o.portalContainer||t.portalContainer,scrollContainer:o.scrollContainer||t.scrollContainer};return e.createElement(L.Provider,{value:o},e.createElement(O,{popover:a},n))};F.displayName="PopoverPropsProvider",F.propTypes={children:i.node};var G={Inline:"inline",Portal:"portal",TopLayer:"top-layer"};export{U as PopoverContext,L as PopoverPropsContext,F as PopoverPropsProvider,N as PopoverProvider,O as PortalContextProvider,G as RenderMode,j as default,E as useBaseFontSize,d as useDarkMode,p as useDarkModeContext,h as useMigrationContext,I as usePopoverContext,M as usePopoverPortalContainer,z as usePopoverPropsContext,x as useUsingKeyboardContext};
//# sourceMappingURL=index.js.map
