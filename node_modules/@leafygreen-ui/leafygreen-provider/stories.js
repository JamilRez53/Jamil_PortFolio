import e,{useContext as r,createContext as n,useState as o,useMemo as t,useEffect as a}from"react";import l from"prop-types";import"@leafygreen-ui/lib";import{useEventListener as i}from"@leafygreen-ui/hooks";var c=n({contextDarkMode:!1,setDarkMode:function(){}});function u(r){var n=r.children,o=r.contextDarkMode,t=r.setDarkMode;return e.createElement(c.Provider,{value:{contextDarkMode:o,setDarkMode:t}},n)}function d(e,r){if(null==e)return{};var n,o,t=function(e,r){if(null==e)return{};var n,o,t={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],r.indexOf(n)>=0||(t[n]=e[n]);return t}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function p(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,t,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===r);else for(;!(c=(o=a.call(n)).done)&&(i.push(o.value),i.length!==r);c=!0);}catch(e){u=!0,t=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw t}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){r>e.length&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}u.displayName="DarkModeProvider",u.propTypes={children:l.node,contextDarkMode:l.bool};var f=["children"],v=n({forceUseTopLayer:!1}),y=function(r){var n=r.children,o=d(r,f);return e.createElement(v.Provider,{value:o},n)};y.displayName="MigrationProvider",y.propTypes={children:l.node};var m={popover:{portalContainer:void 0,scrollContainer:void 0}},b=n(m);function h(r){var n=r.popover,o=void 0===n?m.popover:n,t=r.children;return e.createElement(b.Provider,{value:{popover:o}},t)}var g=n(14);function k(r){var n=r.children,o=r.baseFontSize,t=void 0===o?14:o;return e.createElement(g.Provider,{value:t},n)}k.displayName="TypographyProvider",k.propTypes={children:l.node,baseFontSize:l.number};var M={usingKeyboard:!0,setUsingKeyboard:function(){}},P=n(M),E={tab:9,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};function T(r){var n=r.children,a=p(o(M.usingKeyboard),2),l=a[0],c=a[1];i("mousedown",(function(){return c(!1)}),{enabled:l}),i("keydown",(function(e){var r=e.keyCode;Object.values(E).includes(r)&&c(!0)}),{enabled:!l});var u=t((function(){return{usingKeyboard:l,setUsingKeyboard:c}}),[l]);return e.createElement(P.Provider,{value:u},n)}function w(n){var t=n.children,l=n.baseFontSize,i=n.popoverPortalContainer,d=n.darkMode,s=n.forceUseTopLayer,f=void 0!==s&&s,m=r(c).contextDarkMode,M=p(o(null!=d?d:m),2),P=M[0],E=M[1];a((function(){E(null!=d?d:m)}),[d,m]);var w=r(g),O=null!=l?l:w,S=r(b).popover,x=null!=i?i:S,D=r(v),A=f||D.forceUseTopLayer;return e.createElement(T,null,e.createElement(h,{popover:x},e.createElement(k,{baseFontSize:O},e.createElement(u,{contextDarkMode:P,setDarkMode:E},e.createElement(y,{forceUseTopLayer:A},t)))))}T.displayName="UsingKeyboardProvider",T.propTypes={children:l.node},w.displayName="LeafyGreenProvider",w.propTypes={popoverPortalContainer:l.shape({popover:l.shape({portalContainer:l.elementType,scrollContainer:l.elementType})}),baseFontSize:l.oneOf([14,16]),darkMode:l.bool},l.node,l.node;var O=function(){return e.createElement("div",null,"This is a test component.")},S={title:"Contexts/LeafyGreenProvider",component:w,parameters:{default:null},argTypes:{darkMode:{control:"boolean"},popoverPortalContainer:{control:"none"}}},x=function(r){return e.createElement(w,r,e.createElement(O,null))}.bind({});x.parameters={chromatic:{disableSnapshot:!0}};export{x as Basic,S as default};
